<h1><%= link_to "#{ t "page.index-title" }", tasks_path %></h1>
<!-- search -->
<%= form_tag(tasks_path, method: :get) do %>
  <%= text_field_tag :search, params[:search] %>
  <%= submit_tag "#{ t "attributes.search" }", name: nil %>
<% end %>
<!-- filter by status -->
<%= form_tag(tasks_path, method: :get) do %>
  <%= select :task, :status, options_for_select(%w(待處理 進行中 完成)), {prompt: "#{ t "attributes.filter-status" }"} %>
  <%= submit_tag "#{ t "attributes.filter" }", name: nil %>
<% end %>
<!-- new a task -->
<%= link_to "#{ t "attributes.new" }", new_task_path, class: 'btn btn-primary' %>
<table>
  <tr>
    <th><%= t('activerecord.attributes.task.id') %></th>
    <th><%= t('activerecord.attributes.task.title') %></th>
    <th><%= t('activerecord.attributes.task.content') %></th>
    <th><%= sortable "endtime", t('activerecord.attributes.task.endtime') %></th>
    <th><%= t('activerecord.attributes.task.created_at') %></th>
  </tr>
  <% if @tasks == [] %>
    <tr><td colspan= '5'><%= t('messages.no-task') %></td></tr>
  <% else %>
    <% @tasks.each do |task| %>
      <tr>
        <td><%= task.id %></td>
        <td><%= task.title %></td>
        <td><%= task.content %></td>
        <td><%= task.endtime.strftime("%Y/%m/%d %H:%M") %></td>
        <td><%= task.created_at.strftime("%Y/%m/%d %H:%M") %></td>
        <td><%= link_to "#{ t "attributes.edit" }", edit_task_path(task), class: 'btn btn-warning' %></td>
        <td><%= link_to "#{ t "attributes.delete" }", task_path(task), method: :delete, data: { confirm: "#{ t "messages.ask-delete" }" }, class: 'btn btn-danger' %></td>
      </tr>
    <% end %>
  <% end %>
</table>
